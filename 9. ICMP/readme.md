# ICMP
_ _ _
ICMP (англ. Internet Control Message Protocol — протокол межсетевых управляющих сообщений) это протокол 3-го уровня, который используется для диагностики проблем со связанностью в сети.
Основная цель ICMP это отчетность об ошибках. При соединении двух девайсов в сети, если часть данных не доходит до адреса назначения, теряется или превышает допустимые таймауты - ICMP генерирует ошибки.

### ICMPv4
В сетях IPv4 протокол ICMP используется в основном для дебага и поиска проблем в сети при помощи утилит ping и tracert

### ICMPv6
В сетях IPv6 протокол ICMPv6 играет более значимаю роль,нежели в сетях IPv4. Например этот протокол используется для обмена сообщениеями между маршрутизатором IPv6 и устройтсвом IPv6,либо обмен сообщениями между хостами:
- Сообщение "Запрос к маршрутизатору" хостом ( Router Solicitation, RS) RS cообщение выглядит как "Привет есть ли IPv6 маршрутизатор в сети? Мне нужно знать, как динамически получать информацию об адресах IPv6
- Сообщение "Ответ маршрутизатора" (Router Advertisemet, RA) Сообщения RA содержит данные о префиксе, длине префикса, DNS адрес, доменное имя. Узел использующий SLAAC, установит в качестве своего шлюза по умолчанию локальный адрес маршрутизатора, отправившего RA
- Сообщение с запросом поиска соседей (NS) Устройство, которому назначен GUA IPv6 или LLA, может выполнить обнаружение дубликатов адресов DAD, чтобы убедиться, что адрес IPv6 уникален, для этой проверки устройство отправляет сообщение NS с собственным GUA в качестве целевого - если другое устройство в сети имеет этот адрес, оно овтетит сообщением NA, уведомляющим, что адрес используется. Для определения MAC устройства назначения, отправляет NS сообщение на адрес запрашиваемого узла.
- Сообщение об объявлении соседних узлов (NA)

### Утилита PING
Выполняет тестирование IPv4 и IPv6, которая использует сообщения эхо-запроса ICMP и эхо-ответа для проверки подключения между узлами и предоставляет сводную информацию, включающую в себя степень успеха и среднее время "поездки" туда и обратно до места назначения. Обычно для первого эхо-запроса требуется выполнить разрешение адреса (ARP или ND) перед отправкой эхо-запроса ICMP.
Ключи пакета ping:
-t проверяет связь до ручной остановки
-a разрешает адреса в имена узлов
-l устаналивает размер пакета
-f запрещает фрагментирование пакета
-i задать TTL
-4 принудительное использование IPv4
-6 принудительное использование IPv6


### Утилита TRACERT
Позволяет составить список переходов, по которым успешно проходит эхо-запрос на пути к узлу назначения. Утилита определяет суммарное время прохождения сигнала в прямом и обратном направление (RTT) для каждого перехода.
