# Лабораторная работа. Развертывание коммутируемой сети с резервными каналами
_ _ _
<p align="center">
<image src="https://github.com/LLlMEJIb87/OTUS-learning/blob/master/13.%20STP/topologiya.PNG">
</p>
<div align="center">

__Таблица адресации__

| Устройство       | Интерфейс         | IP адрес  | Маска подсети |
| ------------- |:------------------:|------------------:|------------------:|
| S1 | VLAN 1 | 192.168.1.1 | 255.255.255.0 |
| S2 | VLAN 1 | 192.168.1.2 | 255.255.255.0 |
| S3 | VLAN 1 | 192.168.1.3 | 255.255.255.0 |
</div>

## Часть 1 Создание сети и настройка основных параметров устройства
1. Подключил устройства согласно топологии
2. Выполнил инициализацию и перезагрузку коммутаторов
3. Настроил базовые параметры коммутаторов
4. Проверил доступность коммутаторов по сети
<image src="https://github.com/LLlMEJIb87/OTUS-learning/blob/master/13.%20STP/ping_S1_to_S2_S3.PNG">

## Часть 2 Определение корневого моста
1. Отключил все порты на коммутаторах
2. Перевел все подключенные порты в режим trunk
3. Включил порты Fe0/2 и Fe0/4 на всех коммутаторах
4. Командой show spanning- tree отобразил данные протокола spanning-tree
<image src="https://github.com/LLlMEJIb87/OTUS-learning/blob/master/13.%20STP/show_spannig-tree_1.PNG">

5. Cхема с состоянием и ролью активных портов
<image src="https://github.com/LLlMEJIb87/OTUS-learning/blob/master/13.%20STP/rol_portov_1.PNG">

- все три коммутатора имеют равные значения приоретета идентификатора моста, следовательно коммутатор S2 имея самое низкое значение MAC-адреса стал корневым
- корневыми портами на коммутаторах S1 и S3 стали порты Fe0/4 
- назначенными портами стали: на коммутаторе S2 - Fe0/2 и Fe0/4, на S3 F0/2
- на коммутаторе S1 порт Fa0/2 перешел в состояние block, так как на этом коммутаторе самый высокий приоретет в нашем дереве ( за счёт большего значения MAC адреса)


## Часть 3 Наблюдение за процессом выбора протоколом STP порта, исходя из стоимости портов
1. На коммутаторе S1 порт Fe0/4 имеет статус root, порт Fe0/2 имеет сатус block, меняем  порту Fe0/4 стоимость в ручную и смотрим, что произошло
```
S1(config)#interface f0/4
S1(config-if)#spanning-tree vlan 1 cost 18
```
<image src="https://github.com/LLlMEJIb87/OTUS-learning/blob/master/13.%20STP/show_spannig-tree_2.png">

2. Видим, что топология дерева изменилась, заблокированный порт теперь на коммутаторе S3 Fa0/2, так как стоимость маршрута на порту Fe0/2 коммутатора S1 стала меньше
3. Удалил запись стоимости порта, сделанную ранее
```
S1(config)# interface f0/4
S1(config-if)#no spanning-tree vlan 1 cost 18
```
4. Протокол STP вернул исходные настройки.

## Часть 4 Наблюдение за процессом выбора протоколом STP порта, исходя из приоритета портов
1. Включил порты Fe0/1 и Fe0/3 на всех коммутаторах
2. Cмотрим изменения
<image src="https://github.com/LLlMEJIb87/OTUS-learning/blob/master/13.%20STP/show_spannig-tree_3.png">
3. Видим, что корневым портом на коммутаторах S1 и S3 был выбран порт Fe0/3 так как имеет более низкий приоритет 128.3, в сравнение с выбранными ранее портами Fe0/4 128.4